{% extends "petjoy/base.html" %}
{% load static %}

{% block title %}รายการสินค้า{% endblock %}

{% block content %}
<style>
    .navbar { display: none !important; }
</style>
<div style="display: flex; gap: 2rem; max-width: 1200px; margin: 40px auto;">
    <aside class="sidebar">
        <nav class="sidebar-menu">
            <a href="{% url 'petjoy:entrepreneur-home' %}">โปรไฟล์</a>
            <a href="#">รายละเอียดคำสั่งซื้อ</a>
            <a href="{% url 'petjoy:product-list' %}">รายการสินค้า</a>
            <a href="#">ข้อความ</a>
            <a href="#">แก้ไขรายละเอียด</a>
            <a href="#">รายได้</a>
        </nav>
        <form method="post" action="{% url 'petjoy:logout' %}">
            {% csrf_token %}
            <button type="submit" class="logout-btn">ออกจากระบบ</button>
        </form>
    </aside>
    <div class="product-list-container" style="flex:1;">
        <div class="product-list-header">
            <h1>รายการสินค้า</h1>
            <a href="{% url 'petjoy:product-create' %}" class="btn-add-product white-btn">เพิ่มสินค้าใหม่</a>
        </div>
        <table class="product-table" style="border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.04); background: #fff;">
            <thead>
                <tr style="background: #f8f8f8;">
                    <th style="width: 120px; text-align: center;">รูปภาพ</th>
                    <th>ชื่อสินค้า</th>
                    <th>รายละเอียด</th>
                    <th style="width: 100px; text-align: right;">ราคา</th>
                    <th style="width: 120px;">หมวดหมู่</th>
                    <th style="width: 120px; text-align: center;">จำนวน (ทั้งหมด/คงเหลือ)</th>
                    <th style="width: 180px; text-align: center;">จัดการ</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="text-align: center;">
                        {% if product.image %}
                            <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-table-image" style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px; box-shadow: 0 1px 4px rgba(0,0,0,0.07);">
                        {% else %}
                            <span class="no-products">ไม่มีรูป</span>
                        {% endif %}
                    </td>
                    <td style="font-weight: bold; color: #FF7043;">{{ product.name }}</td>
                    <td style="color: #555;">{{ product.description }}</td>
                    <td style="text-align: right; color: #E65100; font-weight: 500;">{{ product.price }} บาท</td>
                    <td>{{ product.category.display_name }}</td>
                    <td style="text-align: center;">{{ product.total_stock }}/{{ product.stock }}</td>
                    <td style="text-align: center;">
                        <div class="btn-group" style="display:inline-flex;gap:8px;">
                            <a href="{% url 'petjoy:product-detail' product.pk %}" class="white-btn" style="background:#f3f4f6;color:#2563eb;">ดู</a>
                            <a href="{% url 'petjoy:product-update' product.pk %}" class="white-btn" style="background:#fbbf24;color:#fff;">แก้ไข</a>
                            <a href="{% url 'petjoy:product-delete' product.pk %}" class="white-btn" style="background:#ef4444;color:#fff;">ลบ</a>
                        </div>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="no-products">ไม่มีสินค้า</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}