{% extends 'petjoy/admin/admin_base.html' %}

{% load humanize %} 
{% block title %}Admin Dashboard{% endblock %}
{% block page_title %}‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö{% endblock %}

{% block content %}

<div class="stats-grid">

    <div class="stat-card">
        <h4>üë• ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h4>
        <p>{{ total_users|default:"0" }}</p>
    </div>

    <div class="stat-card">
        <h4>üè™ ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h4>
        <p>{{ total_shops|default:"0" }}</p>
    </div>

    <div class="stat-card">
        <h4>‚è≥ ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</h4>
        <a href="{% url 'petjoy:admin-shop-list' %}?status=pending" style="text-decoration: none; color: inherit;">
            <p>{{ pending_shops|default:"0" }}</p>
        </a>
    </div>

    <div class="stat-card">
        <h4>üí∞ ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö</h4>
        <p>‡∏ø{{ total_income|default:"0"|intcomma }}</p>
    </div>

</div>

<div class="admin-content">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
        <h3>üö® ‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
        <a href="{% url 'petjoy:admin-report-list' %}" style="font-size: 0.9rem; color: #E65100; text-decoration: none;">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î &rarr;</a>
    </div>

    <table class="admin-table">
        <thead>
            <tr>
                <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                <th>‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                <th>‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á</th>
                <th>‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á</th>
            </tr>
        </thead>
        <tbody>
            {% for report in recent_reports %}
            <tr>
                <td>{{ report.created_at|date:"d/m/Y" }}</td>
                <td>
                    <a href="{% url 'petjoy:admin-product-detail' report.product.id %}" target="_blank" 
                       style="color: #333; font-weight: 500; text-decoration: none; display: block; max-width: 220px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                        {{ report.product.name }}
                    </a>
                </td>
                <td>{{ report.product.owner.store_name }}</td>
                <td>
                    <span class="badge" style="background:#dc3545; color:white; padding: 2px 8px; font-size: 0.8rem;">
                        {{ report.get_reason_display }}
                    </span>
                </td>
                <td>{{ report.user.username }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" style="text-align:center; color: #999; padding: 20px;">
                    ‚úÖ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="admin-content">
    <h3>üè™ ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>

    <table class="admin-table">
        <thead>
            <tr>
                <th>‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô</th>
                <th>‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô</th>
                <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£</th>
            </tr>
        </thead>
        <tbody>
            {% for shop in recent_shops %}
            <tr>
                <td>{{ shop.store_name }}</td>
                <td>{{ shop.owner_name }}</td>
                <td>{{ shop.user.date_joined|date:"d/m/Y" }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3" style="text-align:center;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}