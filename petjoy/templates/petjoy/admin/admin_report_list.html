{% extends 'petjoy/admin/admin_base.html' %}
{% block nav_reports %}active{% endblock %}
{% block title %}‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤{% endblock %}
{% block page_title %}üö® ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤{% endblock %}

{% block content %}
<style>
    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏∞‡∏ó‡∏±‡∏î‡∏£‡∏±‡∏î (Compact) */
    .btn-compact {
        padding: 4px 8px;       /* ‡∏•‡∏î‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏õ‡∏∏‡πà‡∏° */
        font-size: 0.85rem;     /* ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á */
        border-radius: 4px;
        text-decoration: none;
        color: white;
        display: inline-flex;
        align-items: center;
        gap: 4px;
        border: none;
        transition: filter 0.2s;
        font-weight: 500;
        white-space: nowrap;    /* ‡∏´‡πâ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏î‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î */
    }
    .btn-compact:hover {
        filter: brightness(90%); /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏ï‡∏≠‡∏ô‡πÄ‡∏≠‡∏≤‡πÄ‡∏°‡∏≤‡∏™‡πå‡∏ä‡∏µ‡πâ */
        color: white;
    }

    /* ‡∏™‡∏µ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà */
    .btn-dismiss { background-color: #28a745; } /* ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß: ‡∏¢‡∏Å‡∏ü‡πâ‡∏≠‡∏á/‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô */
    .btn-chat    { background-color: #17a2b8; } /* ‡∏™‡∏µ‡∏ü‡πâ‡∏≤: ‡πÅ‡∏ä‡∏ó */
    .btn-ban     { background-color: #dc3545; } /* ‡∏™‡∏µ‡πÅ‡∏î‡∏á: ‡πÅ‡∏ö‡∏ô/‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ */

    /* ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏î‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏°‡∏±‡πà‡∏ß */
    .nowrap-col { white-space: nowrap; }
</style>

<div class="admin-card">
    <div class="admin-card-header">
        <h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</h3>
    </div>

    <div class="admin-table-wrapper">
        <table class="admin-table">
            <thead>
                <tr>
                    <th style="width: 12%;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                    <th style="width: 20%;">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                    <th style="width: 15%;">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                    <th style="width: 15%;">‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•</th>
                    <th style="width: 18%;">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>
                    <th style="width: 10%;">‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á</th>
                    <th style="text-align: right; min-width: 200px;">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th> </tr>
            </thead>
            <tbody>
                {% for report in reports %}
                <tr>
                    <td class="nowrap-col" style="color: #666; font-size: 0.9rem;">
                        {{ report.created_at|date:"d/m/y H:i" }}
                    </td>
                    <td>
                        <a href="{% url 'petjoy:admin-product-detail' report.product.id %}" target="_blank" 
                           style="font-weight:600; color:#E65100; text-decoration: none;">
                            {{ report.product.name|truncatechars:20 }}
                        </a>
                    </td>
                    <td>{{ report.product.owner.store_name|truncatechars:15 }}</td>
                    
                    <td>
                        <span class="badge" 
                              style="background:#dc3545; color:white; white-space: nowrap; display: inline-block; font-size: 0.8rem;">
                            {{ report.get_reason_display }}
                        </span>
                    </td>
                    
                    <td style="font-size: 0.9rem; color: #555;">
                        {{ report.details|default:"-"|truncatechars:20 }}
                    </td>
                    <td>{{ report.user.username }}</td>
                    
                    <td style="text-align: right;">
                        <div style="display: flex; gap: 5px; justify-content: flex-end; align-items: center;">
                            
                            <a href="{% url 'petjoy:admin-delete-report' report.id %}" 
                               class="btn-compact btn-dismiss" 
                               onclick="return confirm('‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ? (‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢)');"
                               title="‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏ó‡∏¥‡πâ‡∏á">
                                ‚úÖ ‡∏¢‡∏Å‡∏ü‡πâ‡∏≠‡∏á
                            </a>

                            <a href="{% url 'petjoy:admin-start-chat-report' report.id %}" 
                               class="btn-compact btn-chat" 
                               title="‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤">
                                üí¨ ‡πÅ‡∏ä‡∏ó
                            </a>

                            <a href="{% url 'petjoy:admin-delete-product-reported' report.product.id %}" 
                               class="btn-compact btn-ban"
                               onclick="return confirm('‚ö†Ô∏è ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ {{ report.product.name }}?');"
                               title="‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö">
                                üóëÔ∏è ‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                            </a>
                        </div>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" class="empty" style="text-align: center; padding: 30px;">
                        ‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}