{% extends 'petjoy/base.html' %}
{% load static %}
{% load humanize %}

{% block title %}PetJoy{% endblock %}

{% block content %}
<main class="content">

    <!-- ============================
         GREETING
    ================================ -->
    <div class="hello-banner">
        <div class="hello-left">
            <h1>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ {{ request.user.first_name|default:"‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏£‡∏±‡∏Å" }}</h1>
            <p>‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏ï‡∏±‡∏ß‡∏ô‡πâ‡∏≠‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞ ‚ù§Ô∏è</p>
        </div>
        <img src="{% static 'images/‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á.png' %}" class="hello-img" alt="pet">
    </div>

    <!-- ============================
         CATEGORY
    ================================ -->
    <section class="pet-selection">
        <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏Å‡πä‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h3>
        <div class="pet-options">

            <a href="{% url 'petjoy:dog-products' %}" class="pet-card">
                <div class="pet-image-container">
                    <img src="{% static 'images/DOG.jpg' %}">
                </div>
                <span>‡∏™‡∏∏‡∏ô‡∏±‡∏Ç</span>
            </a>

            <a href="{% url 'petjoy:cat-products' %}" class="pet-card">
                <div class="pet-image-container">
                    <img src="{% static 'images/CAT.jpg' %}">
                </div>
                <span>‡πÅ‡∏°‡∏ß</span>
            </a>

            <a href="{% url 'petjoy:food-products' %}" class="pet-card">
                <div class="pet-image-container">
                    <img src="{% static 'images/food.png' %}">
                </div>
                <span>‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏±‡∏ï‡∏ß‡πå</span>
            </a>

        </div>
    </section>

    <!-- ============================
         RECOMMENDED PRODUCTS
    ================================ -->
    <section class="recommend-products">
        <h3 class="recommend-title">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h3>

        <div class="products-grid small-grid">

            {% for product in products|slice:":6" %}
            <div class="product-item small-card">

                <div class="product-image-placeholder small-img">
                    {% if product.image %}
                        <img src="{{ product.image.url }}" class="product-image">
                    {% else %}
                        <img src="{% static 'images/no-image.png' %}" class="product-image">
                    {% endif %}
                </div>

                <div class="product-name small-name">
                    {{ product.name }}
                </div>

                <div class="product-price small-price">
                    {{ product.price|floatformat:0|intcomma }} ‡∏ö‡∏≤‡∏ó
                </div>

                <!-- ‡∏õ‡∏∏‡πà‡∏° -->
                <div class="product-actions">
                    <form method="POST" action="{% url 'petjoy:cart-add' %}">
                        {% csrf_token %}
                        <input type="hidden" name="product_id" value="{{ product.id }}">
                        <input type="hidden" name="quantity" value="1">
                        <button type="submit" class="add-cart-btn nice-btn">
                            + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                        </button>
                    </form>

                    <a href="{% url 'petjoy:product-detail' product.id %}"
                       class="detail-btn">
                        ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                    </a>
                </div>

            </div>
            {% empty %}
                <p style="text-align:center;color:#777;">
                    ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
                </p>
            {% endfor %}

        </div>
    </section>

</main>

<!-- ============================
     CHATBOT
=============================== -->
<div id="chatbot-container" class="chatbot-popup hidden">
    <div class="chatbot-header">
        <span class="chatbot-header-title">üêæ PetJoy</span>
    </div>
    <div class="chatbot-body" id="chat-response">
        <div class="bot-msg">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ üëã ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ Joy ‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞?</div>
    </div>
    <div class="chatbot-input-area">
        <input type="text" id="chatbot-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°..." />
        <button id="chatbot-send">‡∏™‡πà‡∏á</button>
    </div>
</div>
<button class="chatbot-toggle-button">üí¨</button>

{% endblock %}
