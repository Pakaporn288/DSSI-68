{% load static %}

<link rel="stylesheet" href="{% static 'entrepreneur.css' %}">
<style>.navbar{display:none!important;}</style>

<div class="seller-layout">

    <!-- SIDEBAR -->
    <aside class="seller-sidebar">

        <div class="seller-profile">
            {% if entrepreneur.profile_image %}
                <img src="{{ entrepreneur.profile_image.url }}" class="seller-avatar">
            {% else %}
                <img src="{% static 'images/‡∏£‡πâ‡∏≤‡∏ô.png' %}" class="seller-avatar">
            {% endif %}
            <h3 class="seller-name">{{ entrepreneur.store_name }}</h3>
            <p class="seller-username">@{{ entrepreneur.user.username }}</p>
        </div>

        <nav class="seller-menu">
            <a href="{% url 'petjoy:entrepreneur-home' %}">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡∏£‡πâ‡∏≤‡∏ô</a>
            <a href="{% url 'petjoy:orders-list' %}">üì¶ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</a>
            <a class="active" href="{% url 'petjoy:product-list' %}">üõçÔ∏è ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
            <a href="#">üí¨ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</a>
            <a href="{% url 'petjoy:entrepreneur-profile-edit-home' %}">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏£‡πâ‡∏≤‡∏ô</a>
            <a href="#">üí∞ ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</a>
        </nav>

        <form method="post" action="{% url 'petjoy:logout' %}">
            {% csrf_token %}
            <button class="seller-logout">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
        </form>

    </aside>

    <!-- MAIN -->
    <main class="seller-main">

        {% if messages %}
        <div class="dashboard-messages">
            {% for m in messages %}
                <div class="dashboard-message-item">{{ m }}</div>
            {% endfor %}
        </div>
        {% endif %}

        <h2 class="section-title">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</h2>

        <div class="product-card" style="
            max-width:650px;margin:auto;
            background:white;padding:35px;
            border-radius:18px;box-shadow:0 4px 20px rgba(0,0,0,.08);">

            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}

                <div class="form-group">
                    <label>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                    {{ form.name }}
                </div>

                <div class="form-group">
                    <label>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</label>
                    {{ form.total_stock }}
                </div>

                <div class="form-group">
                    <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</label>
                    {{ form.stock }}
                </div>

                <div class="form-group">
                    <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                    {{ form.description }}
                </div>

                <div class="form-group" id="features-group">
                    <label>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                    {{ form.features }}
                </div>

                <div class="form-group">
                    <label>‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</label>
                    {{ form.price }}
                </div>

                <div class="form-group">
                    <label>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                    {{ form.category }}
                </div>

                <!-- food type -->
                <div class="form-group" id="food-type-group" style="display:none;">
                    <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏±‡∏ï‡∏ß‡πå</label>
                    {{ form.food_type }}
                </div>

                <div class="form-group">
                    <label>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                    {{ form.image }}
                </div>

                <button type="submit"
                    style="background:#FF6A2E;color:white;padding:12px 20px;
                    border:none;border-radius:10px;font-weight:700;font-size:1.1rem;width:100%;cursor:pointer;">
                    ‚úî ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                </button>

            </form>
        </div>

        <script>
            (function(){
                function isFood(text){
                    return /‡∏≠‡∏≤‡∏´‡∏≤‡∏£|food/i.test(text);
                }
                function updateForm(){
                    let cat = document.getElementById("id_category");
                    let foodType = document.getElementById("food-type-group");
                    let features = document.getElementById("features-group");
                    let featuresInput = document.getElementById("id_features");
                    let selected = cat.options[cat.selectedIndex];
                    let isFoodCategory = selected && isFood(selected.text);

                    if(isFoodCategory){
                        foodType.style.display = "";
                        features.style.display = "none";
                        featuresInput.disabled = true;
                    } else {
                        foodType.style.display = "none";
                        features.style.display = "";
                        featuresInput.disabled = false;
                    }
                }
                document.addEventListener("DOMContentLoaded", function(){
                    let cat = document.getElementById("id_category");
                    if(cat){
                        cat.addEventListener("change", updateForm);
                        updateForm();
                    }
                });
            })();
        </script>

    </main>

</div>
