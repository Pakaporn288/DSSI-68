{% extends "petjoy/base.html" %}
{% load static %}

{% block content %}

<link rel="stylesheet" href="{% static 'entrepreneur.css' %}">
<style>.navbar{display:none!important;}</style>

<style>
    .form-wrapper {
        max-width: 700px;
        margin: auto;
        background: white;
        padding: 35px;
        border-radius: 18px;
        box-shadow: 0 4px 20px rgba(0,0,0,.08);
        margin-top: 20px;
    }

    .form-wrapper label {
        font-weight: 700;
        color: #444;
        margin-bottom: 6px;
        display: block;
    }

    .form-wrapper input,
    .form-wrapper textarea,
    .form-wrapper select {
        width: 100%;
        padding: 10px;
        border-radius: 10px;
        border: 1px solid #ddd;
        margin-bottom: 15px;
        background: #fafafa;
    }

    .form-wrapper input:focus,
    .form-wrapper textarea:focus,
    .form-wrapper select:focus {
        border-color: #FF6A2E;
        outline: none;
        background: white;
        box-shadow: 0 0 4px rgba(255,106,46,.4);
    }

    .submit-btn {
        background:#FF6A2E;
        color:white;
        padding:14px;
        border:none;
        border-radius:10px;
        width:100%;
        font-size:1.2rem;
        font-weight:700;
        cursor:pointer;
    }

    .submit-btn:hover {
        background:#E05822;
    }

    .section-title {
        font-size: 1.5rem;
        font-weight: 800;
        color: #E65100;
        margin-bottom: 12px;
        margin-top: 10px;
    }
</style>

<div class="seller-layout">

    <!-- SIDEBAR -->
    <aside class="seller-sidebar">

        <div class="seller-profile">
            {% if entrepreneur.profile_image %}
                <img src="{{ entrepreneur.profile_image.url }}" class="seller-avatar">
            {% else %}
                <img src="{% static 'images/‡∏£‡πâ‡∏≤‡∏ô.png' %}" class="seller-avatar">
            {% endif %}
            <h3 class="seller-name">{{ entrepreneur.store_name }}</h3>
            <p class="seller-username">@{{ entrepreneur.user.username }}</p>
        </div>

        <nav class="seller-menu">
            <a href="{% url 'petjoy:entrepreneur-home' %}">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡∏£‡πâ‡∏≤‡∏ô</a>
            <a href="{% url 'petjoy:orders-list' %}">üì¶ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</a>
            <a class="active" href="{% url 'petjoy:product-list' %}">üõçÔ∏è ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
            <a href="#">üí¨ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</a>
            <a href="{% url 'petjoy:entrepreneur-profile-edit-home' %}">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏£‡πâ‡∏≤‡∏ô</a>
            <a href="#">üí∞ ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</a>
        </nav>

        <form method="post" action="{% url 'petjoy:logout' %}">
            {% csrf_token %}
            <button class="seller-logout">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
        </form>
    </aside>


    <!-- MAIN -->
    <main class="seller-main">

        {% if messages %}
        <div class="dashboard-messages">
            {% for m in messages %}
                <div class="dashboard-message-item">{{ m }}</div>
            {% endfor %}
        </div>
        {% endif %}

        <h2 class="section-title">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</h2>

        <div class="form-wrapper">

            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                
                <label>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                {{ form.name }}

                <label>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</label>
                {{ form.total_stock }}

                <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</label>
                {{ form.stock }}

                <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                {{ form.description }}

                <div id="features-group">
                    <label>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                    {{ form.features }}
                </div>

                <label>‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</label>
                {{ form.price }}

                <label>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                {{ form.category }}

                <div id="food-type-group" style="display:none;">
                    <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏±‡∏ï‡∏ß‡πå </label>
                    {{ form.food_type }}
                </div>

                <label>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                {{ form.image }}

                <button class="submit-btn">‚úî ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
            </form>

        </div>

        <!-- JS ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥ & ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£ -->
        <script>
            (function(){
                function isFood(text){
                    return /‡∏≠‡∏≤‡∏´‡∏≤‡∏£|food/i.test(text);
                }
                function updateForm(){
                    let cat = document.getElementById("id_category");
                    let foodType = document.getElementById("food-type-group");
                    let features = document.getElementById("features-group");
                    let featuresInput = document.getElementById("id_features");
                    let selected = cat.options[cat.selectedIndex];
                    let isFoodCategory = selected && isFood(selected.text);

                    if(isFoodCategory){
                        foodType.style.display = "";
                        features.style.display = "none";
                        featuresInput.disabled = true;
                    } else {
                        foodType.style.display = "none";
                        features.style.display = "";
                        featuresInput.disabled = false;
                    }
                }
                document.addEventListener("DOMContentLoaded", function(){
                    let cat = document.getElementById("id_category");
                    if(cat){
                        cat.addEventListener("change", updateForm);
                        updateForm();
                    }
                });
            })();
        </script>

    </main>
</div>

{% endblock %}
