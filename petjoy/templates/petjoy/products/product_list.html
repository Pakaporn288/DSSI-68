{% load static %}

{% block content %}

<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700;800;900&display=swap">
<link rel="stylesheet" href="{% static 'entrepreneur.css' %}">

<style>
    .navbar { display: none !important; }

    .search-box {
        background: white;
        padding: 18px;
        border-radius: 14px;
        box-shadow: 0 4px 14px rgba(0,0,0,0.08);
        margin-bottom: 20px;
    }

    .search-row {
        display: flex;
        gap: 12px;
        align-items: center;
    }

    .search-input, .category-select {
        padding: 10px 14px;
        border-radius: 10px;
        border: 1px solid #ddd;
        width: 100%;
        font-size: 15px;
    }

    .search-btn {
        background: #FF9800;
        color: white;
        padding: 10px 20px;
        border-radius: 10px;
        border: none;
        cursor: pointer;
        font-weight: 700;
        transition: .2s;
        white-space: nowrap;
    }

    .search-btn:hover { background: #F57C00; }

    .product-action-btn {
        display: inline-block;
        padding: 7px 14px;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 700;
        text-decoration: none !important;
        border: none;
        cursor: pointer;
        transition: 0.2s ease-in-out;
    }

    .btn-view { background: #e3f2fd; color: #1976D2; }
    .btn-view:hover { background: #bbdefb; }

    .btn-edit { background: #FFD54F; color: #5D4037; }
    .btn-edit:hover { background: #FFCA28; }

    .btn-delete { background: #E53935; color: white; }
    .btn-delete:hover { background: #C62828; }
</style>

<div class="seller-layout">

    <!-- SIDEBAR -->
    <aside class="seller-sidebar">
        <div>
            <div class="seller-profile">
                {% if entrepreneur.profile_image %}
                    <img src="{{ entrepreneur.profile_image.url }}" class="seller-avatar">
                {% else %}
                    <img src="{% static 'images/‡∏£‡πâ‡∏≤‡∏ô.png' %}" class="seller-avatar">
                {% endif %}
                <h3 class="seller-name">{{ entrepreneur.store_name }}</h3>
                <p class="seller-username">@{{ entrepreneur.user.username }}</p>
            </div>

            <nav class="seller-menu">
                <a href="{% url 'petjoy:entrepreneur-home' %}">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡∏£‡πâ‡∏≤‡∏ô</a>
                <a href="{% url 'petjoy:orders-list' %}">üì¶ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</a>
                <a href="{% url 'petjoy:product-list' %}" class="active">üõçÔ∏è ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
                <a href="{% url 'petjoy:entrepreneur-chat-list' %}">üí¨ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</a>
                <a href="{% url 'petjoy:entrepreneur_profile_settings' %}">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏£‡πâ‡∏≤‡∏ô</a>
                <a href="#">üí∞ ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</a>
            </nav>

            <form method="post" action="{% url 'petjoy:logout' %}">
                {% csrf_token %}
                <button class="seller-logout">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
            </form>
        </div>
    </aside>



    <!-- MAIN -->
    <main class="seller-main">

        <section class="seller-header-box">
            <div class="header-left">
                {% if entrepreneur.profile_image %}
                    <img src="{{ entrepreneur.profile_image.url }}" class="store-logo">
                {% else %}
                    <img src="{% static 'images/‡∏£‡πâ‡∏≤‡∏ô.png' %}" class="store-logo">
                {% endif %}
                <div>
                    <h2 class="store-title">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏£‡πâ‡∏≤‡∏ô</h2>
                    <p class="store-subtitle">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡πÄ‡∏û‡∏¥‡πà‡∏° ‡∏•‡∏ö ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</p>
                </div>
            </div>

            <a href="{% url 'petjoy:product-create' %}" class="store-edit-btn">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</a>
        </section>


        <!-- SEARCH BAR -->
        <div class="search-box">
            <form method="get" class="search-row">
                
                <input type="text" name="search" class="search-input"
                       placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤..."
                       value="{{ request.GET.search }}">

                <select name="category" class="category-select">
                    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà --</option>
                    {% for cat in categories %}
                        <option value="{{ cat.id }}"
                                {% if request.GET.category == cat.id|stringformat:"s" %}selected{% endif %}>
                            {{ cat.display_name }}
                        </option>
                    {% endfor %}
                </select>

                <button type="submit" class="search-btn">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
            </form>
        </div>


        <!-- TABLE -->
        <div style="overflow-x:auto;">
            <table class="product-table" 
                   style="width:100%; background:white; border-radius:14px; overflow:hidden;
                          box-shadow:0 4px 14px rgba(0,0,0,0.08);">

                <thead style="background:#FFF3E0; font-weight:700;">
                    <tr>
                        <th style="text-align:center;">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</th>
                        <th>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                        <th style="text-align:right;">‡∏£‡∏≤‡∏Ñ‡∏≤</th>
                        <th style="text-align:center;">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</th>
                        <th style="text-align:center;">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î / ‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠)</th>
                        <th style="text-align:center;">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                    </tr>
                </thead>

                <tbody>
                {% for product in products %}
                    <tr style="border-bottom:1px solid #eee;">

                        <td style="text-align:center;">
                            {% if product.image %}
                                <img src="{{ product.image.url }}"
                                     style="width:60px; height:60px; border-radius:12px; object-fit:cover;">
                            {% else %}
                                <span style="opacity:.6;">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ</span>
                            {% endif %}
                        </td>

                        <td style="font-weight:bold; color:#E65100;">{{ product.name }}</td>

                        <td style="text-align:right; font-weight:700; color:#FF7043;">
                            {{ product.price }} ‡∏ö‡∏≤‡∏ó
                        </td>

                        <td style="text-align:center;">
                            {{ product.category.display_name }}
                        </td>

                        <td style="text-align:center;">
                            {{ product.total_stock }}/{{ product.stock }}
                        </td>

                        <td style="text-align:center;">
                            <div style="display:flex; justify-content:center; gap:8px;">
                                
                                <a href="{% url 'petjoy:entrepreneur-product-detail' product.pk %}"
                                   class="product-action-btn btn-view">
                                    ‡∏î‡∏π
                                </a>

                                <a href="{% url 'petjoy:product-update' product.pk %}"
                                   class="product-action-btn btn-edit">
                                    ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                                </a>

                                <a href="{% url 'petjoy:product-delete' product.pk %}"
                                   class="product-action-btn btn-delete">
                                    ‡∏•‡∏ö
                                </a>

                            </div>
                        </td>

                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="6" style="text-align:center; padding:20px;">
                            ‚ùó ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

    </main>
</div>

{% endblock %}
