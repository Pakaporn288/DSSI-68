{% load static %}

{% block content %}

<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700;800;900&display=swap">
<link rel="stylesheet" href="{% static 'entrepreneur.css' %}">

<style>
    .navbar { display: none !important; }
</style>

<div class="seller-layout">

    <!-- SIDEBAR -->
    <aside class="seller-sidebar">

        <div>
            <div class="seller-profile">
                {% if entrepreneur.profile_image %}
                    <img src="{{ entrepreneur.profile_image.url }}" class="seller-avatar">
                {% else %}
                    <img src="{% static 'images/‡∏£‡πâ‡∏≤‡∏ô.png' %}" class="seller-avatar">
                {% endif %}

                <h3 class="seller-name">{{ entrepreneur.store_name }}</h3>
                <p class="seller-username">@{{ entrepreneur.user.username }}</p>
            </div>

            <nav class="seller-menu">
                <a href="{% url 'petjoy:entrepreneur-home' %}">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡∏£‡πâ‡∏≤‡∏ô</a>
                <a href="{% url 'petjoy:orders-list' %}">üì¶ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</a>
                <a href="{% url 'petjoy:product-list' %}" class="active">üõçÔ∏è ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
                <a href="#">üí¨ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</a>
                <a href="{% url 'petjoy:entrepreneur-profile-edit-home' %}">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏£‡πâ‡∏≤‡∏ô</a>
                <a href="#">üí∞ ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</a>
            </nav>

            <form method="post" action="{% url 'petjoy:logout' %}">
                {% csrf_token %}
                <button class="seller-logout">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
            </form>
        </div>
    </aside>


    <!-- MAIN CONTENT -->
    <main class="seller-main">

        <!-- HEADER BOX -->
        <section class="seller-header-box">

            <div class="header-left">
                {% if entrepreneur.profile_image %}
                    <img src="{{ entrepreneur.profile_image.url }}" class="store-logo">
                {% else %}
                    <img src="{% static 'images/‡∏£‡πâ‡∏≤‡∏ô.png' %}" class="store-logo">
                {% endif %}

                <div>
                    <h2 class="store-title">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô {{ entrepreneur.store_name }}</h2>
                    <p class="store-subtitle">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ ‡πÄ‡∏û‡∏¥‡πà‡∏° ‡∏•‡∏ö ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
                </div>
            </div>

            <a href="{% url 'petjoy:product-create' %}" class="store-edit-btn">
                ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà
            </a>
        </section>


        <!-- FILTER BAR -->
        <div style="margin-bottom: 1.5rem; display:flex; gap: 12px; align-items:center;">

            <form method="get" style="display:flex; gap:10px; width:100%;">

                <!-- Search -->
                <input type="text"
                       name="search"
                       placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤..."
                       value="{{ request.GET.search }}"
                       style="
                           flex:1;
                           padding:10px 14px;
                           border-radius:10px;
                           border:1px solid #ccc;
                           font-size:15px;
                       ">

                <!-- Category -->
                <select name="category"
                        style="padding:10px 14px; border-radius:10px; border:1px solid #ccc; font-size:15px;">
                    <option value="">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                    {% for c in categories %}
                        <option value="{{ c.id }}"
                                {% if request.GET.category == c.id|stringformat:'s' %}selected{% endif %}>
                            {{ c.display_name }}
                        </option>
                    {% endfor %}
                </select>

                <button type="submit"
                        style="
                            background:#FF7043;
                            color:white;
                            padding:10px 18px;
                            border:none;
                            border-radius:10px;
                            font-size:15px;
                            cursor:pointer;
                        ">
                    üîé ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                </button>

            </form>

        </div>


        <!-- PRODUCT LIST AREA -->
        <section class="product-area">

            <h2 class="section-title">üì¶ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>

            <div style="overflow-x:auto;">
                <table class="product-table"
                       style="width:100%; background:white; border-radius:12px; overflow:hidden; 
                              box-shadow:0 4px 12px rgba(0,0,0,0.07);">

                    <thead style="background:#FFF3E0; font-weight:700;">
                        <tr>
                            <th style="width:100px; text-align:center;">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</th>
                            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th style="width:120px; text-align:right;">‡∏£‡∏≤‡∏Ñ‡∏≤</th>
                            <th style="width:150px; text-align:center;">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</th>
                            <th style="width:150px; text-align:center;">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î/‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠)</th>
                            <th style="width:200px; text-align:center;">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>

                    <tbody>

                    {% for product in products %}
                        <tr style="border-bottom:1px solid #eee;">
                            
                            <!-- IMAGE -->
                            <td style="text-align:center;">
                                {% if product.image %}
                                    <img src="{{ product.image.url }}"
                                         style="width:60px; height:60px; border-radius:10px; object-fit:cover;">
                                {% else %}
                                    <span style="color:#888;">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ</span>
                                {% endif %}
                            </td>

                            <!-- NAME -->
                            <td style="font-weight:bold; color:#E65100;">
                                {{ product.name }}
                            </td>

                            <!-- PRICE -->
                            <td style="text-align:right; font-weight:600; color:#FF7043;">
                                {{ product.price }} ‡∏ö‡∏≤‡∏ó
                            </td>

                            <!-- CATEGORY ‚Üí ‚òÖ Center -->
                            <td style="text-align:center;">
                                {{ product.category.display_name }}
                            </td>

                            <!-- TOTAL / STOCK -->
                            <td style="text-align:center;">
                                {{ product.total_stock }}/{{ product.stock }}
                            </td>

                            <!-- ACTION BUTTONS -->
                            <td style="text-align:center;">
                                <div style="display:flex; gap:8px; justify-content:center;">

                                    <a href="{% url 'petjoy:product-detail' product.pk %}"
                                       style="background:#e3f2fd; padding:6px 12px; border-radius:8px; color:#1e88e5;">
                                        ‡∏î‡∏π
                                    </a>

                                    <a href="{% url 'petjoy:product-update' product.pk %}"
                                       style="background:#fdd835; padding:6px 12px; border-radius:8px; color:#fff;">
                                        ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                                    </a>

                                    <a href="{% url 'petjoy:product-delete' product.pk %}"
                                       style="background:#e53935; padding:6px 12px; border-radius:8px; color:#fff;">
                                        ‡∏•‡∏ö
                                    </a>

                                </div>
                            </td>

                        </tr>

                    {% empty %}
                        <tr>
                            <td colspan="6" style="padding:2rem; text-align:center; opacity:0.6;">
                                ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
                            </td>
                        </tr>
                    {% endfor %}

                    </tbody>

                </table>
            </div>

        </section>

    </main>
</div>

{% endblock %}
